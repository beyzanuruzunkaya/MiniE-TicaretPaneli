@model IEnumerable<MiniE_TicaretPaneli.Models.Product>
@{
    ViewData["Title"] = "Anasayfa";
}

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert" style="margin-top: 20px;">
        <i class="fas fa-check-circle me-2"></i>
        @TempData["SuccessMessage"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<!-- Hero Banner/Slider -->
<section class="hero-section text-center text-white py-5 mb-5" style="min-height: 600px; display: flex; align-items: center; justify-content: center;">
    <div class="container hero-content">
        <div class="fade-in">
            <h1 class="display-2 fw-bold mb-4" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
                Tarzınızı Keşfedin!
            </h1>
            <p class="lead mb-5" style="font-size: 1.3rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">
                En yeni kıyafet trendleri, aksesuarlar ve çok daha fazlası şimdi parmaklarınızın ucunda.
            </p>
            <a href="/Customer/Product/Products" class="btn custom-btn-glow btn-lg px-5 py-3">
                <i class="fas fa-shopping-bag me-2"></i> Hemen Alışverişe Başla
            </a>
        </div>
    </div>
</section>

<!-- Popüler Kategoriler -->
<section class="container mb-5">
    <h2 class="text-center mb-5 display-5 fw-bold text-dark-emphasis section-title fade-in">Popüler Kategoriler</h2>
    <div class="row row-cols-1 row-cols-md-3 g-4">
        <div class="col fade-in stagger-animation" style="--animation-order: 1;">
            <div class="card h-100 category-card text-center">
                <div style="background: linear-gradient(45deg, #ff9a9e, #fecfef); height: 200px; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-female display-1 text-white"></i>
                </div>
                <div class="card-body">
                    <h5 class="card-title fw-bold">Kadın Giyim</h5>
                    <p class="card-text text-muted">En şık ve güncel kadın giyim koleksiyonları.</p>
                    <a href="/Customer/Product/Products?gender=Kadın" class="btn btn-outline-primary mt-2 rounded-pill">
                        İncele <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                </div>
            </div>
        </div>
        <div class="col fade-in stagger-animation" style="--animation-order: 2;">
            <div class="card h-100 category-card text-center">
                <div style="background: linear-gradient(45deg, #a8edea, #fed6e3); height: 200px; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-male display-1 text-white"></i>
                </div>
                <div class="card-body">
                    <h5 class="card-title fw-bold">Erkek Giyim</h5>
                    <p class="card-text text-muted">Tarz sahibi erkekler için özel seçkiler.</p>
                    <a href="/Customer/Product/Products?gender=Erkek" class="btn btn-outline-primary mt-2 rounded-pill">
                        İncele <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                </div>
            </div>
        </div>
        <div class="col fade-in stagger-animation" style="--animation-order: 3;">
            <div class="card h-100 category-card text-center">
                <div style="background: linear-gradient(45deg, #ffecd2, #fcb69f); height: 200px; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-child display-1 text-white"></i>
                </div>
                <div class="card-body">
                    <h5 class="card-title fw-bold">Çocuk Giyim</h5>
                    <p class="card-text text-muted">Minik kahramanlar için rahat ve şık giysiler.</p>
                    <a href="/Customer/Product/Products?gender=Çocuk" class="btn btn-outline-primary mt-2 rounded-pill">
                        İncele <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Öne Çıkan Ürünler (Dinamik) -->
<section class="container mb-5">
    <h2 class="text-center mb-5 display-5 fw-bold text-dark-emphasis section-title fade-in">Öne Çıkan Ürünler</h2>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
        @if (Model != null && Model.Any())
        {
            int productIndex = 0;
            foreach (var product in Model)
            {
                <div class="col fade-in stagger-animation" style="--animation-order: @(productIndex % 4);">
                    <div class="card h-100 product-card">
                        <div style="background: linear-gradient(45deg, #f093fb, #f5576c); height: 250px; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden;">
                            @if (!string.IsNullOrEmpty(product.ImageUrl) && product.ImageUrl != "/images/default-product.jpg")
                            {
                                <img src="@product.ImageUrl" class="w-100 h-100" style="object-fit: cover;" alt="@product.Name">
                            }
                            else
                            {
                                <i class="fas fa-tshirt display-1 text-white"></i>
                            }
                            <div class="position-absolute top-0 end-0 m-2">
                                <span class="badge bg-danger rounded-pill">Yeni</span>
                            </div>
                        </div>
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title fw-bold">@product.Name</h5>
                            <p class="card-text text-muted small">@(product.Description?.Length > 60 ? product.Description.Substring(0, 60) + "..." : product.Description)</p>
                            <div class="mt-auto">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="fs-4 fw-bold text-success">@product.Price.ToString("C2")</span>
                                    <small class="text-muted">Stok: @product.Stock</small>
                                </div>
                                <form asp-action="AddToCart" asp-controller="Cart" method="post" class="d-inline w-100">
                                    @Html.AntiForgeryToken()
                                    <input type="hidden" name="productId" value="@product.Id" />
                                    <input type="hidden" name="quantity" value="1" />
                                    <input type="hidden" name="selectedSize" value="@(product.AvailableSizes?.Split(',').FirstOrDefault() ?? "M")" />
                                    <button type="submit" class="btn btn-primary w-100 rounded-pill">
                                        <i class="fas fa-cart-plus me-1"></i> Sepete Ekle
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                productIndex++;
            }
        }
        else
        {
            <div class="col-12 text-center text-muted fade-in">
                <i class="fas fa-box-open display-1 mb-3"></i>
                <h4>Henüz öne çıkan ürün yok.</h4>
                <p>Yakında harika ürünlerle burada olacağız!</p>
            </div>
        }
    </div>
    <div class="text-center mt-5 fade-in">
        <a asp-controller="Product" asp-action="Products" class="btn btn-outline-dark btn-lg rounded-pill px-5">
            <i class="fas fa-th-large me-2"></i>Tüm Ürünleri Gör
        </a>
    </div>
</section>

<!-- Avantajlar/Servisler -->
<section class="container mb-5">
    <h2 class="text-center mb-5 display-5 fw-bold text-dark-emphasis section-title fade-in">Bizden Size Özel</h2>
    <div class="row row-cols-1 row-cols-md-3 g-4">
        <div class="col fade-in stagger-animation" style="--animation-order: 1;">
            <div class="card h-100 text-center service-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                <div class="card-body">
                    <i class="fas fa-truck display-4 mb-3"></i>
                    <h5 class="card-title fw-bold">Hızlı Kargo</h5>
                    <p class="card-text">Siparişleriniz en hızlı şekilde kapınızda!</p>
                </div>
            </div>
        </div>
        <div class="col fade-in stagger-animation" style="--animation-order: 2;">
            <div class="card h-100 text-center service-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">
                <div class="card-body">
                    <i class="fas fa-undo-alt display-4 mb-3"></i>
                    <h5 class="card-title fw-bold">Kolay İade</h5>
                    <p class="card-text">Memnun kalmazsanız kolayca iade edin.</p>
                </div>
            </div>
        </div>
        <div class="col fade-in stagger-animation" style="--animation-order: 3;">
            <div class="card h-100 text-center service-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white;">
                <div class="card-body">
                    <i class="fas fa-headset display-4 mb-3"></i>
                    <h5 class="card-title fw-bold">7/24 Destek</h5>
                    <p class="card-text">Her sorunuzda yanınızdayız.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Newsletter Section -->
<section class="container mb-5">
    <div class="card fade-in" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 20px;">
        <div class="card-body text-center py-5">
            <h3 class="fw-bold mb-3">Yeni Ürünlerden Haberdar Olun!</h3>
            <p class="mb-4">En yeni koleksiyonlar ve özel indirimler için bültenimize abone olun.</p>
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="input-group">
                        <input type="email" class="form-control rounded-start" placeholder="E-posta adresiniz" style="border: none;">
                        <button class="btn btn-warning rounded-end" type="button">
                            <i class="fas fa-paper-plane me-2"></i>Abone Ol
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        // Sayfa yüklendiğinde animasyonları başlat
        document.addEventListener('DOMContentLoaded', function() {
            // Intersection Observer ile scroll animasyonları
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);
            
            // Tüm fade-in elementlerini gözlemle
            document.querySelectorAll('.fade-in').forEach(el => {
                observer.observe(el);
            });
        });
    </script>
}